---
source: crates/trust-syntax/tests/parser_complex.rs
expression: "snapshot_parse(r#\"FUNCTION_BLOCK FB_PID\nVAR_INPUT\n    setpoint : REAL;\n    actual : REAL;\n    kp : REAL := 1.0;\n    ki : REAL := 0.1;\n    kd : REAL := 0.01;\nEND_VAR\nVAR_OUTPUT\n    output : REAL;\nEND_VAR\nVAR\n    error : REAL;\n    prev_error : REAL;\n    integral : REAL;\nEND_VAR\n\nerror := setpoint - actual;\nintegral := integral + error;\noutput := kp * error + ki * integral + kd * (error - prev_error);\nprev_error := error;\n\nEND_FUNCTION_BLOCK\"#)"
---
SourceFile@0..424
  FunctionBlock@0..424
    KwFunctionBlock@0..14 "FUNCTION_BLOCK"
    Name@14..22
      Ident@15..21 "FB_PID"
    VarBlock@22..147
      KwVarInput@22..31 "VAR_INPUT"
      VarDecl@31..57
        Name@31..45
          Ident@36..44 "setpoint"
        Colon@45..46 ":"
        TypeRef@46..51
          KwReal@47..51 "REAL"
        Semicolon@51..52 ";"
      VarDecl@57..76
        Name@57..64
          Ident@57..63 "actual"
        Colon@64..65 ":"
        TypeRef@65..70
          KwReal@66..70 "REAL"
        Semicolon@70..71 ";"
      VarDecl@76..98
        Name@76..79
          Ident@76..78 "kp"
        Colon@79..80 ":"
        TypeRef@80..86
          KwReal@81..85 "REAL"
        Assign@86..88 ":="
        Literal@88..92
          RealLiteral@89..92 "1.0"
        Semicolon@92..93 ";"
      VarDecl@98..120
        Name@98..101
          Ident@98..100 "ki"
        Colon@101..102 ":"
        TypeRef@102..108
          KwReal@103..107 "REAL"
        Assign@108..110 ":="
        Literal@110..114
          RealLiteral@111..114 "0.1"
        Semicolon@114..115 ";"
      VarDecl@120..139
        Name@120..123
          Ident@120..122 "kd"
        Colon@123..124 ":"
        TypeRef@124..130
          KwReal@125..129 "REAL"
        Assign@130..132 ":="
        Literal@132..137
          RealLiteral@133..137 "0.01"
        Semicolon@137..138 ";"
      KwEndVar@139..146 "END_VAR"
    VarBlock@147..185
      KwVarOutput@147..157 "VAR_OUTPUT"
      VarDecl@157..177
        Name@157..169
          Ident@162..168 "output"
        Colon@169..170 ":"
        TypeRef@170..175
          KwReal@171..175 "REAL"
        Semicolon@175..176 ";"
      KwEndVar@177..184 "END_VAR"
    VarBlock@185..260
      KwVar@185..188 "VAR"
      VarDecl@188..211
        Name@188..199
          Ident@193..198 "error"
        Colon@199..200 ":"
        TypeRef@200..205
          KwReal@201..205 "REAL"
        Semicolon@205..206 ";"
      VarDecl@211..234
        Name@211..222
          Ident@211..221 "prev_error"
        Colon@222..223 ":"
        TypeRef@223..228
          KwReal@224..228 "REAL"
        Semicolon@228..229 ";"
      VarDecl@234..251
        Name@234..243
          Ident@234..242 "integral"
        Colon@243..244 ":"
        TypeRef@244..249
          KwReal@245..249 "REAL"
        Semicolon@249..250 ";"
      KwEndVar@251..258 "END_VAR"
    AssignStmt@260..288
      NameRef@260..266
        Ident@260..265 "error"
      Assign@266..268 ":="
      BinaryExpr@268..286
        NameRef@268..278
          Ident@269..277 "setpoint"
        Minus@278..279 "-"
        NameRef@279..286
          Ident@280..286 "actual"
      Semicolon@286..287 ";"
    AssignStmt@288..318
      NameRef@288..297
        Ident@288..296 "integral"
      Assign@297..299 ":="
      BinaryExpr@299..316
        NameRef@299..309
          Ident@300..308 "integral"
        Plus@309..310 "+"
        NameRef@310..316
          Ident@311..316 "error"
      Semicolon@316..317 ";"
    AssignStmt@318..384
      NameRef@318..325
        Ident@318..324 "output"
      Assign@325..327 ":="
      BinaryExpr@327..382
        BinaryExpr@327..355
          BinaryExpr@327..339
            NameRef@327..331
              Ident@328..330 "kp"
            Star@331..332 "*"
            NameRef@332..339
              Ident@333..338 "error"
          Plus@339..340 "+"
          BinaryExpr@340..355
            NameRef@340..344
              Ident@341..343 "ki"
            Star@344..345 "*"
            NameRef@345..355
              Ident@346..354 "integral"
        Plus@355..356 "+"
        BinaryExpr@356..382
          NameRef@356..360
            Ident@357..359 "kd"
          Star@360..361 "*"
          ParenExpr@361..382
            LParen@362..363 "("
            BinaryExpr@363..381
              NameRef@363..369
                Ident@363..368 "error"
              Minus@369..370 "-"
              NameRef@370..381
                Ident@371..381 "prev_error"
            RParen@381..382 ")"
      Semicolon@382..383 ";"
    AssignStmt@384..406
      NameRef@384..395
        Ident@384..394 "prev_error"
      Assign@395..397 ":="
      NameRef@397..403
        Ident@398..403 "error"
      Semicolon@403..404 ";"
    KwEndFunctionBlock@406..424 "END_FUNCTION_BLOCK"
