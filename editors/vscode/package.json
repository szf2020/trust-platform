{
  "name": "trust-lsp",
  "displayName": "truST LSP",
  "description": "truST LSP â€” IEC 61131-3 Structured Text language support",
  "icon": "icon.png",
  "version": "0.9.1",
  "publisher": "trust-platform",
  "license": "MIT OR Apache-2.0",
  "engines": {
    "vscode": "^1.108.0"
  },
  "categories": [
    "Programming Languages",
    "Linters",
    "Formatters"
  ],
  "keywords": [
    "plc",
    "iec61131",
    "structured-text",
    "automation",
    "codesys"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/johannesPettersson80/trust-platform",
    "directory": "editors/vscode"
  },
  "activationEvents": [
    "onLanguage:structured-text",
    "onDebug:structured-text",
    "onCommand:trust-lsp.newProject",
    "onCommand:trust-lsp.plcopen.import",
    "onCommand:trust-lsp.plcopen.export",
    "onCommand:trust-lsp.debug.openIoPanel",
    "onCommand:trust-lsp.hmi.openPreview",
    "onCommand:trust-lsp.hmi.refreshFromDescriptor",
    "onCommand:trust-lsp.hmi.init",
    "onCommand:trust-lsp.debug.reload",
    "onCommand:trust-lsp.moveNamespace.ui",
    "onLanguageModelTool:trust_lsp_request",
    "onLanguageModelTool:trust_lsp_notify",
    "onLanguageModelTool:trust_get_hover",
    "onLanguageModelTool:trust_get_semantic_tokens_full",
    "onLanguageModelTool:trust_get_semantic_tokens_delta",
    "onLanguageModelTool:trust_get_semantic_tokens_range",
    "onLanguageModelTool:trust_get_inlay_hints",
    "onLanguageModelTool:trust_get_linked_editing",
    "onLanguageModelTool:trust_get_document_links",
    "onLanguageModelTool:trust_get_code_lens",
    "onLanguageModelTool:trust_get_selection_ranges",
    "onLanguageModelTool:trust_get_on_type_formatting_edits",
    "onLanguageModelTool:trust_call_hierarchy_prepare",
    "onLanguageModelTool:trust_call_hierarchy_incoming",
    "onLanguageModelTool:trust_call_hierarchy_outgoing",
    "onLanguageModelTool:trust_type_hierarchy_prepare",
    "onLanguageModelTool:trust_type_hierarchy_supertypes",
    "onLanguageModelTool:trust_type_hierarchy_subtypes",
    "onLanguageModelTool:trust_file_read",
    "onLanguageModelTool:trust_read_range",
    "onLanguageModelTool:trust_file_write",
    "onLanguageModelTool:trust_apply_edits",
    "onLanguageModelTool:trust_get_diagnostics",
    "onLanguageModelTool:trust_get_definition",
    "onLanguageModelTool:trust_get_declaration",
    "onLanguageModelTool:trust_get_type_definition",
    "onLanguageModelTool:trust_get_implementation",
    "onLanguageModelTool:trust_get_references",
    "onLanguageModelTool:trust_get_completions",
    "onLanguageModelTool:trust_get_signature_help",
    "onLanguageModelTool:trust_get_document_symbols",
    "onLanguageModelTool:trust_get_workspace_symbols",
    "onLanguageModelTool:trust_get_workspace_symbols_timed",
    "onLanguageModelTool:trust_get_rename_edits",
    "onLanguageModelTool:trust_get_formatting_edits",
    "onLanguageModelTool:trust_get_code_actions",
    "onLanguageModelTool:trust_get_project_info",
    "onLanguageModelTool:trust_hmi_get_bindings",
    "onLanguageModelTool:trust_hmi_get_layout",
    "onLanguageModelTool:trust_hmi_apply_patch",
    "onLanguageModelTool:trust_hmi_plan_intent",
    "onLanguageModelTool:trust_hmi_trace_capture",
    "onLanguageModelTool:trust_hmi_generate_candidates",
    "onLanguageModelTool:trust_hmi_validate",
    "onLanguageModelTool:trust_hmi_preview_snapshot",
    "onLanguageModelTool:trust_hmi_run_journey",
    "onLanguageModelTool:trust_hmi_explain_widget",
    "onLanguageModelTool:trust_hmi_init",
    "onLanguageModelTool:trust_workspace_rename_file",
    "onLanguageModelTool:trust_update_settings",
    "onLanguageModelTool:trust_read_telemetry",
    "onLanguageModelTool:trust_get_inline_values",
    "onLanguageModelTool:trust_debug_start",
    "onLanguageModelTool:trust_debug_attach",
    "onLanguageModelTool:trust_debug_reload",
    "onLanguageModelTool:trust_debug_open_io_panel",
    "onLanguageModelTool:trust_debug_ensure_configuration",
    "onCommand:trust-lsp.test.runAll",
    "onCommand:trust-lsp.test.runOne"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "languages": [
      {
        "id": "structured-text",
        "aliases": [
          "Structured Text",
          "ST",
          "IEC 61131-3"
        ],
        "extensions": [
          ".st",
          ".ST",
          ".pou",
          ".POU"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "structured-text",
        "scopeName": "source.st",
        "path": "./syntaxes/st.tmLanguage.json"
      }
    ],
    "configuration": {
      "type": "object",
      "title": "Structured Text",
      "properties": {
        "trust-lsp.server.path": {
          "type": "string",
          "default": "",
          "description": "Path to the trust-lsp server executable"
        },
        "trust-lsp.trace.server": {
          "type": "string",
          "enum": [
            "off",
            "messages",
            "verbose"
          ],
          "default": "off",
          "description": "Traces the communication between VS Code and the language server"
        },
        "trust-lsp.diagnostics.showIecReferences": {
          "type": "boolean",
          "default": true,
          "description": "Append IEC 61131-3 references to diagnostic messages and link to local spec docs when available."
        },
        "trust-lsp.debug.adapter.path": {
          "type": "string",
          "default": "",
          "description": "Path to the trust-debug adapter executable (leave empty to use trust-debug from PATH)"
        },
        "trust-lsp.debug.adapter.args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Arguments passed to the debug adapter"
        },
        "trust-lsp.debug.adapter.env": {
          "type": "object",
          "default": {},
          "additionalProperties": {
            "type": "string"
          },
          "description": "Environment variables for the debug adapter"
        },
        "trust-lsp.runtime.includeGlobs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "**/*.{st,ST,pou,POU}"
          ],
          "description": "Glob patterns for Structured Text sources to load in the runtime. Defaults to all Structured Text files in the workspace."
        },
        "trust-lsp.runtime.excludeGlobs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Glob patterns of Structured Text sources to exclude from the runtime load set."
        },
        "trust-lsp.runtime.mode": {
          "type": "string",
          "enum": [
            "simulate",
            "online"
          ],
          "default": "simulate",
          "description": "Default runtime mode for the runtime panel.",
          "scope": "resource"
        },
        "trust-lsp.runtime.controlEndpoint": {
          "type": "string",
          "default": "",
          "description": "Runtime control endpoint override for inline values (e.g. unix:///tmp/trust-debug.sock). Leave empty to rely on trust-lsp.toml.",
          "scope": "resource"
        },
        "trust-lsp.runtime.controlAuthToken": {
          "type": "string",
          "default": "",
          "description": "Optional auth token for the runtime control endpoint override.",
          "scope": "resource"
        },
        "trust-lsp.runtime.controlEndpointEnabled": {
          "type": "boolean",
          "default": true,
          "description": "Use the configured runtime control endpoint for inline values.",
          "scope": "resource"
        },
        "trust-lsp.runtime.inlineValuesEnabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable inline values in the editor.",
          "scope": "resource"
        },
        "trust-lsp.runtime.ignorePragmas": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "@trustlsp:runtime-ignore"
          ],
          "description": "Top-of-file pragma tokens that exclude a file from runtime loading."
        },
        "trust-lsp.runtime.cli.path": {
          "type": "string",
          "default": "",
          "description": "Path to the trust-runtime CLI executable for running Structured Text tests (leave empty to use trust-runtime from PATH)."
        },
        "trust-lsp.hmi.pollIntervalMs": {
          "type": "number",
          "default": 500,
          "minimum": 100,
          "description": "Polling interval for the HMI preview panel value refresh (milliseconds).",
          "scope": "resource"
        }
      }
    },
    "languageModelTools": [
      {
        "name": "trust_get_hover",
        "displayName": "ST Hover Info",
        "toolReferenceName": "stHover",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-class)",
        "userDescription": "Get hover information for a symbol in Structured Text.",
        "modelDescription": "Returns hover/documentation info for a symbol at a specific position in a Structured Text file. Use this to understand what a variable, function, or type does.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path or VS Code URI to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_file_read",
        "displayName": "ST File Read",
        "toolReferenceName": "stFileRead",
        "canBeReferencedInPrompt": true,
        "icon": "$(file-text)",
        "userDescription": "Read a Structured Text file or a range within it.",
        "modelDescription": "Reads file contents (optionally a range) from a Structured Text file. Use this to gather context before editing.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the file"
            },
            "startLine": {
              "type": "number",
              "description": "Optional zero-based start line"
            },
            "startCharacter": {
              "type": "number",
              "description": "Optional zero-based start character"
            },
            "endLine": {
              "type": "number",
              "description": "Optional zero-based end line"
            },
            "endCharacter": {
              "type": "number",
              "description": "Optional zero-based end character"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_read_range",
        "displayName": "ST Read Range",
        "toolReferenceName": "stReadRange",
        "canBeReferencedInPrompt": true,
        "icon": "$(selection)",
        "userDescription": "Read a range from a Structured Text file.",
        "modelDescription": "Reads a specific range from a Structured Text file. Use this to fetch targeted context.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the file"
            },
            "startLine": {
              "type": "number",
              "description": "Zero-based start line"
            },
            "startCharacter": {
              "type": "number",
              "description": "Zero-based start character"
            },
            "endLine": {
              "type": "number",
              "description": "Zero-based end line"
            },
            "endCharacter": {
              "type": "number",
              "description": "Zero-based end character"
            }
          },
          "required": [
            "filePath",
            "startLine",
            "startCharacter",
            "endLine",
            "endCharacter"
          ]
        }
      },
      {
        "name": "trust_file_write",
        "displayName": "ST File Write",
        "toolReferenceName": "stFileWrite",
        "canBeReferencedInPrompt": true,
        "icon": "$(save)",
        "userDescription": "Write a full file for Structured Text.",
        "modelDescription": "Writes the entire file contents for a Structured Text file. Use this to create or replace a file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the file"
            },
            "text": {
              "type": "string",
              "description": "Full file contents"
            },
            "save": {
              "type": "boolean",
              "description": "Whether to save the file after writing",
              "default": false
            }
          },
          "required": [
            "filePath",
            "text"
          ]
        }
      },
      {
        "name": "trust_apply_edits",
        "displayName": "ST Apply Edits",
        "toolReferenceName": "stApplyEdits",
        "canBeReferencedInPrompt": true,
        "icon": "$(edit)",
        "userDescription": "Apply text edits to a Structured Text file.",
        "modelDescription": "Applies one or more range edits to a Structured Text file. Use this for precise in-place updates.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the file"
            },
            "edits": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "startLine": {
                    "type": "number",
                    "description": "Zero-based start line"
                  },
                  "startCharacter": {
                    "type": "number",
                    "description": "Zero-based start character"
                  },
                  "endLine": {
                    "type": "number",
                    "description": "Zero-based end line"
                  },
                  "endCharacter": {
                    "type": "number",
                    "description": "Zero-based end character"
                  },
                  "newText": {
                    "type": "string",
                    "description": "Replacement text for the range"
                  }
                },
                "required": [
                  "startLine",
                  "startCharacter",
                  "endLine",
                  "endCharacter",
                  "newText"
                ]
              }
            },
            "save": {
              "type": "boolean",
              "description": "Whether to save the file after applying edits",
              "default": false
            }
          },
          "required": [
            "filePath",
            "edits"
          ]
        }
      },
      {
        "name": "trust_get_diagnostics",
        "displayName": "ST Diagnostics",
        "toolReferenceName": "stDiagnostics",
        "canBeReferencedInPrompt": true,
        "icon": "$(warning)",
        "userDescription": "Get errors and warnings in a Structured Text file.",
        "modelDescription": "Returns all diagnostic messages (errors and warnings) for a Structured Text file. Use this to find problems in ST code.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_get_definition",
        "displayName": "ST Go to Definition",
        "toolReferenceName": "stDefinition",
        "canBeReferencedInPrompt": true,
        "icon": "$(go-to-file)",
        "userDescription": "Find where a symbol is defined.",
        "modelDescription": "Returns the location where a symbol (variable, function, type) is defined. Use this to navigate to declarations.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path or VS Code URI to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_declaration",
        "displayName": "ST Go to Declaration",
        "toolReferenceName": "stDeclaration",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-field)",
        "userDescription": "Find where a symbol is declared.",
        "modelDescription": "Returns the location where a symbol is declared. Use this to find the original declaration.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path or VS Code URI to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_type_definition",
        "displayName": "ST Go to Type Definition",
        "toolReferenceName": "stTypeDefinition",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-type-parameter)",
        "userDescription": "Find the type definition for a symbol.",
        "modelDescription": "Returns the type definition location for a symbol. Use this to resolve aliases and custom types.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_implementation",
        "displayName": "ST Go to Implementation",
        "toolReferenceName": "stImplementation",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-implementation)",
        "userDescription": "Find implementations of a symbol.",
        "modelDescription": "Returns implementation locations for a symbol (for example, methods or interface implementations). Use this to jump to concrete implementations.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_references",
        "displayName": "ST Find References",
        "toolReferenceName": "stReferences",
        "canBeReferencedInPrompt": true,
        "icon": "$(references)",
        "userDescription": "Find references to a symbol.",
        "modelDescription": "Returns all references to a symbol in Structured Text. Use this to see all uses across files.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            },
            "includeDeclaration": {
              "type": "boolean",
              "description": "Whether to include the declaration in the results.",
              "default": true
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_completions",
        "displayName": "ST Completions",
        "toolReferenceName": "stCompletions",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-keyword)",
        "userDescription": "Get completion items at a position.",
        "modelDescription": "Returns completion items at a specific position in a Structured Text file. Use this to discover identifiers, functions, keywords, and snippets available in context.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            },
            "triggerCharacter": {
              "type": "string",
              "description": "Optional trigger character, e.g. '.' or ':'"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_signature_help",
        "displayName": "ST Signature Help",
        "toolReferenceName": "stSignatureHelp",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-method)",
        "userDescription": "Get signature help at a call site.",
        "modelDescription": "Returns signature help (parameter list and active parameter) at a given position. Use this to call functions/FBs correctly.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_document_symbols",
        "displayName": "ST Document Symbols",
        "toolReferenceName": "stDocumentSymbols",
        "canBeReferencedInPrompt": true,
        "icon": "$(list-tree)",
        "userDescription": "List symbols in a Structured Text file.",
        "modelDescription": "Returns document symbols for a Structured Text file, including ranges and container hierarchy. Use this to navigate the structure of a file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_get_workspace_symbols",
        "displayName": "ST Workspace Symbols",
        "toolReferenceName": "stWorkspaceSymbols",
        "canBeReferencedInPrompt": true,
        "icon": "$(search)",
        "userDescription": "Search workspace symbols.",
        "modelDescription": "Searches for symbols across the workspace by name. Use this to find functions, types, variables, or FBs when you don't know where they are defined.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "Search query for symbol names"
            },
            "limit": {
              "type": "number",
              "description": "Maximum number of results to return"
            }
          },
          "required": [
            "query"
          ]
        }
      },
      {
        "name": "trust_get_rename_edits",
        "displayName": "ST Rename Preview",
        "toolReferenceName": "stRenameEdits",
        "canBeReferencedInPrompt": true,
        "icon": "$(edit)",
        "userDescription": "Preview rename edits for a symbol.",
        "modelDescription": "Returns a workspace edit preview for renaming a symbol. Use this to see what would change before applying a rename.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            },
            "newName": {
              "type": "string",
              "description": "New symbol name"
            }
          },
          "required": [
            "filePath",
            "line",
            "character",
            "newName"
          ]
        }
      },
      {
        "name": "trust_get_formatting_edits",
        "displayName": "ST Format Preview",
        "toolReferenceName": "stFormatEdits",
        "canBeReferencedInPrompt": true,
        "icon": "$(paintcan)",
        "userDescription": "Preview formatting edits for a file.",
        "modelDescription": "Returns formatting edits for a Structured Text file without applying them. Use this to preview formatter changes.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_get_code_actions",
        "displayName": "ST Code Actions",
        "toolReferenceName": "stCodeActions",
        "canBeReferencedInPrompt": true,
        "icon": "$(lightbulb)",
        "userDescription": "Get code actions for a range.",
        "modelDescription": "Returns available code actions for a given range. Use this to apply quick fixes or refactors.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "startLine": {
              "type": "number",
              "description": "Zero-based start line"
            },
            "startCharacter": {
              "type": "number",
              "description": "Zero-based start character"
            },
            "endLine": {
              "type": "number",
              "description": "Zero-based end line"
            },
            "endCharacter": {
              "type": "number",
              "description": "Zero-based end character"
            }
          },
          "required": [
            "filePath",
            "startLine",
            "startCharacter",
            "endLine",
            "endCharacter"
          ]
        }
      },
      {
        "name": "trust_get_project_info",
        "displayName": "ST Project Info",
        "toolReferenceName": "stProjectInfo",
        "canBeReferencedInPrompt": true,
        "icon": "$(info)",
        "userDescription": "Run the trust-lsp.projectInfo LSP command.",
        "modelDescription": "Executes the trust-lsp.projectInfo command via workspace/executeCommand and returns the response.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "arguments": {
              "type": "array",
              "items": {},
              "description": "Optional arguments array for the command"
            }
          }
        }
      },
      {
        "name": "trust_hmi_get_bindings",
        "displayName": "ST HMI Bindings",
        "toolReferenceName": "stHmiGetBindings",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-field)",
        "userDescription": "Return available HMI binding points with type and write metadata.",
        "modelDescription": "Returns all external-facing PLC binding points (program/global) with canonical bind paths, data types, qualifier metadata, writability, and constraints via trust-lsp.hmiBindings.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI to scope lookup."
            },
            "filePath": {
              "type": "string",
              "description": "Optional file path/URI used to resolve workspace scope."
            }
          }
        }
      },
      {
        "name": "trust_hmi_get_layout",
        "displayName": "ST HMI Layout",
        "toolReferenceName": "stHmiGetLayout",
        "canBeReferencedInPrompt": true,
        "icon": "$(layout)",
        "userDescription": "Read hmi/ descriptor files.",
        "modelDescription": "Reads all TOML files under hmi/ and returns config/pages/file content. Returns { exists: false } when no hmi/ directory exists.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI to scope file reads."
            }
          }
        }
      },
      {
        "name": "trust_hmi_apply_patch",
        "displayName": "ST HMI Patch",
        "toolReferenceName": "stHmiApplyPatch",
        "canBeReferencedInPrompt": true,
        "icon": "$(diff)",
        "userDescription": "Apply typed patch operations to hmi/*.toml files.",
        "modelDescription": "Applies typed patch operations to hmi TOML descriptor files with dry_run support and conflict reporting; writes only changed files and triggers descriptor refresh.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "dry_run": {
              "type": "boolean",
              "description": "Validate operations without writing files."
            },
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "operations": {
              "type": "array",
              "description": "Patch operations on descriptor pointers under /files/<name>.toml[/content].",
              "items": {
                "type": "object",
                "properties": {
                  "op": {
                    "type": "string",
                    "enum": [
                      "add",
                      "remove",
                      "replace",
                      "move"
                    ]
                  },
                  "path": {
                    "type": "string",
                    "description": "JSON pointer path."
                  },
                  "from": {
                    "type": "string",
                    "description": "Source JSON pointer for move."
                  },
                  "value": {
                    "description": "String TOML content for add/replace."
                  }
                },
                "required": [
                  "op",
                  "path"
                ]
              }
            }
          },
          "required": [
            "operations"
          ]
        }
      },
      {
        "name": "trust_hmi_plan_intent",
        "displayName": "ST HMI Intent Plan",
        "toolReferenceName": "stHmiPlanIntent",
        "canBeReferencedInPrompt": true,
        "icon": "$(target)",
        "userDescription": "Generate or update hmi/_intent.toml from operator goals and constraints.",
        "modelDescription": "Creates a deterministic hmi/_intent.toml artifact with goals, personas, KPIs, priorities, and constraints for the HMI intent-to-evidence loop. Supports dry_run preview without file writes.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "dry_run": {
              "type": "boolean",
              "description": "Render intent content without writing hmi/_intent.toml."
            },
            "summary": {
              "type": "string",
              "description": "Single-sentence operator intent summary."
            },
            "goals": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Ordered operator goals."
            },
            "personas": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Operator personas for layout/flow decisions."
            },
            "kpis": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "KPIs used to evaluate dashboard effectiveness."
            },
            "priorities": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Priority order (for example safety, alarm salience, action latency)."
            },
            "constraints": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Safety/operational constraints that must hold."
            }
          }
        }
      },
      {
        "name": "trust_hmi_trace_capture",
        "displayName": "ST HMI Trace Capture",
        "toolReferenceName": "stHmiTraceCapture",
        "canBeReferencedInPrompt": true,
        "icon": "$(pulse)",
        "userDescription": "Capture API-level runtime traces for selected HMI widget IDs and scenarios.",
        "modelDescription": "Captures runtime traces at the API/event layer using hmi.schema.get and hmi.values.get for a chosen scenario and writes deterministic evidence artifacts under hmi/_evidence/<run>/trace-<scenario>.json.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "dry_run": {
              "type": "boolean",
              "description": "Capture and return trace payload without writing evidence files."
            },
            "run_id": {
              "type": "string",
              "description": "Optional existing evidence run id (YYYY-MM-DDTHH-MM-SSZ)."
            },
            "scenario": {
              "type": "string",
              "description": "Scenario label (for example startup, normal, fault, recovery)."
            },
            "ids": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optional widget IDs to sample. Defaults to first schema widgets."
            },
            "samples": {
              "type": "number",
              "description": "Number of samples to capture (1-50)."
            },
            "sample_interval_ms": {
              "type": "number",
              "description": "Delay between samples in milliseconds (10-5000)."
            }
          }
        }
      },
      {
        "name": "trust_hmi_generate_candidates",
        "displayName": "ST HMI Generate Candidates",
        "toolReferenceName": "stHmiGenerateCandidates",
        "canBeReferencedInPrompt": true,
        "icon": "$(sparkle)",
        "userDescription": "Generate deterministic layout candidates ranked by readability, latency, and alarm salience.",
        "modelDescription": "Generates deterministic HMI candidate layouts by reusing scaffold-style strategy parameters (grouping, density, widget bias), ranks them by objective metrics, and can persist candidates.json evidence.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "dry_run": {
              "type": "boolean",
              "description": "Generate candidates without writing hmi/_evidence artifacts."
            },
            "run_id": {
              "type": "string",
              "description": "Optional existing evidence run id (YYYY-MM-DDTHH-MM-SSZ)."
            },
            "candidate_count": {
              "type": "number",
              "description": "How many ranked candidates to return."
            }
          }
        }
      },
      {
        "name": "trust_hmi_validate",
        "displayName": "ST HMI Validate",
        "toolReferenceName": "stHmiValidate",
        "canBeReferencedInPrompt": true,
        "icon": "$(verified-filled)",
        "userDescription": "Validate HMI descriptor, emit lock/evidence artifacts, and optionally prune evidence runs.",
        "modelDescription": "Runs HMI validation checks (descriptor diagnostics, write-policy guardrails, poll budget checks, and binding coverage), emits deterministic hmi/_lock.json, and stores validation evidence under hmi/_evidence/<timestamp>/ with optional bounded retention pruning.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "dry_run": {
              "type": "boolean",
              "description": "Run checks without writing _lock.json or evidence files."
            },
            "prune": {
              "type": "boolean",
              "description": "When true, prune oldest hmi/_evidence runs after writing current evidence."
            },
            "retain_runs": {
              "type": "number",
              "description": "Maximum number of newest evidence runs to retain when prune=true. Defaults to 10."
            }
          }
        }
      },
      {
        "name": "trust_hmi_preview_snapshot",
        "displayName": "ST HMI Preview Snapshot",
        "toolReferenceName": "stHmiPreviewSnapshot",
        "canBeReferencedInPrompt": true,
        "icon": "$(device-camera)",
        "userDescription": "Render deterministic desktop/tablet/mobile snapshot artifacts for a candidate layout.",
        "modelDescription": "Renders deterministic SVG snapshot artifacts for desktop/tablet/mobile viewports for a selected candidate layout and stores them under hmi/_evidence/<run>/screenshots/.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "dry_run": {
              "type": "boolean",
              "description": "Compute snapshots and hashes without writing files."
            },
            "run_id": {
              "type": "string",
              "description": "Optional existing evidence run id (YYYY-MM-DDTHH-MM-SSZ)."
            },
            "candidate_id": {
              "type": "string",
              "description": "Optional candidate id. Defaults to highest-ranked candidate."
            },
            "viewports": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "desktop",
                  "tablet",
                  "mobile"
                ]
              },
              "description": "Subset of viewport snapshots to render."
            }
          }
        }
      },
      {
        "name": "trust_hmi_run_journey",
        "displayName": "ST HMI Run Journey",
        "toolReferenceName": "stHmiRunJourney",
        "canBeReferencedInPrompt": true,
        "icon": "$(play)",
        "userDescription": "Execute scripted API/event-level operator journeys and record metrics.",
        "modelDescription": "Runs API/event-level journey scripts (read_values, wait, write) without requiring a browser, captures timing and pass/fail metrics, and writes journeys evidence under hmi/_evidence/<run>/journeys.json.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "dry_run": {
              "type": "boolean",
              "description": "Execute journey logic without writing journeys.json."
            },
            "run_id": {
              "type": "string",
              "description": "Optional existing evidence run id (YYYY-MM-DDTHH-MM-SSZ)."
            },
            "scenario": {
              "type": "string",
              "description": "Scenario label for evidence grouping."
            },
            "journeys": {
              "type": "array",
              "description": "Optional journey definitions; defaults to API read-values smoke journey.",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "max_duration_ms": {
                    "type": "number"
                  },
                  "steps": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "action": {
                          "type": "string",
                          "enum": [
                            "read_values",
                            "wait",
                            "write"
                          ]
                        },
                        "ids": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "duration_ms": {
                          "type": "number"
                        },
                        "widget_id": {
                          "type": "string"
                        },
                        "value": {},
                        "expect_error_code": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "action"
                      ]
                    }
                  }
                },
                "required": [
                  "id"
                ]
              }
            }
          }
        }
      },
      {
        "name": "trust_hmi_explain_widget",
        "displayName": "ST HMI Explain Widget",
        "toolReferenceName": "stHmiExplainWidget",
        "canBeReferencedInPrompt": true,
        "icon": "$(info)",
        "userDescription": "Explain widget provenance from bind path to type, write policy, and contract metadata.",
        "modelDescription": "Explains a widget's provenance path and guardrails: canonical ID, PLC symbol path/type, write-policy allowlist state, and endpoint-level contract context.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "rootPath": {
              "type": "string",
              "description": "Optional workspace root path/URI."
            },
            "widget_id": {
              "type": "string",
              "description": "Canonical widget ID to explain."
            },
            "path": {
              "type": "string",
              "description": "Bind/source path fallback when widget_id is not provided."
            }
          }
        }
      },
      {
        "name": "trust_hmi_init",
        "displayName": "ST HMI Init",
        "toolReferenceName": "stHmiInit",
        "canBeReferencedInPrompt": true,
        "icon": "$(dashboard)",
        "userDescription": "Generate an HMI scaffold from PLC sources.",
        "modelDescription": "Auto-generates an hmi/ directory from the current PLC workspace by executing trust-lsp.hmiInit over workspace/executeCommand. Use this first when a user asks to create an HMI.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "style": {
              "type": "string",
              "enum": [
                "industrial",
                "classic",
                "mint"
              ],
              "description": "Optional HMI theme style. Defaults to industrial."
            }
          }
        }
      },
      {
        "name": "trust_get_inline_values",
        "displayName": "ST Inline Values",
        "toolReferenceName": "stInlineValues",
        "canBeReferencedInPrompt": true,
        "icon": "$(debug)",
        "userDescription": "Retrieve inline values from the active debug session.",
        "modelDescription": "Requests inline values from the active debug session for a frame and range.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "frameId": {
              "type": "number",
              "description": "Stack frame id from the debug session"
            },
            "startLine": {
              "type": "number",
              "description": "Zero-based start line"
            },
            "startCharacter": {
              "type": "number",
              "description": "Zero-based start character"
            },
            "endLine": {
              "type": "number",
              "description": "Zero-based end line"
            },
            "endCharacter": {
              "type": "number",
              "description": "Zero-based end character"
            },
            "context": {
              "type": "object",
              "additionalProperties": true,
              "description": "Optional inline value context"
            }
          },
          "required": [
            "frameId",
            "startLine",
            "startCharacter",
            "endLine",
            "endCharacter"
          ]
        }
      },
      {
        "name": "trust_lsp_request",
        "displayName": "ST LSP Request",
        "toolReferenceName": "stLspRequest",
        "canBeReferencedInPrompt": true,
        "icon": "$(terminal)",
        "userDescription": "Send a raw LSP request and capture the response.",
        "modelDescription": "Sends a raw LSP request via the active Structured Text language client. Returns the response payload and optionally captured notifications.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "method": {
              "type": "string",
              "description": "LSP method, e.g. textDocument/hover"
            },
            "params": {
              "type": "object",
              "description": "Optional LSP params"
            },
            "requestTimeoutMs": {
              "type": "number",
              "description": "Optional timeout in milliseconds"
            },
            "captureNotifications": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optional list of notification methods to capture"
            },
            "notificationTimeoutMs": {
              "type": "number",
              "description": "Optional timeout to wait for notifications in milliseconds"
            },
            "captureProgress": {
              "type": "boolean",
              "description": "Whether to capture $/progress notifications and attach a workDoneToken"
            },
            "capturePartialResults": {
              "type": "boolean",
              "description": "Whether to attach a partialResultToken and capture $/progress notifications"
            },
            "workDoneToken": {
              "type": "string",
              "description": "Optional workDoneToken to attach to params"
            },
            "partialResultToken": {
              "type": "string",
              "description": "Optional partialResultToken to attach to params"
            }
          },
          "required": [
            "method"
          ]
        }
      },
      {
        "name": "trust_lsp_notify",
        "displayName": "ST LSP Notify",
        "toolReferenceName": "stLspNotify",
        "canBeReferencedInPrompt": true,
        "icon": "$(terminal)",
        "userDescription": "Send a raw LSP notification.",
        "modelDescription": "Sends a raw LSP notification via the active Structured Text language client.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "method": {
              "type": "string",
              "description": "LSP notification method, e.g. textDocument/didOpen"
            },
            "params": {
              "type": "object",
              "description": "Optional LSP params"
            }
          },
          "required": [
            "method"
          ]
        }
      },
      {
        "name": "trust_get_semantic_tokens_full",
        "displayName": "ST Semantic Tokens (Full)",
        "toolReferenceName": "stSemanticTokensFull",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-color)",
        "userDescription": "Get full semantic tokens for a file.",
        "modelDescription": "Returns full semantic token data for a Structured Text file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_get_semantic_tokens_delta",
        "displayName": "ST Semantic Tokens (Delta)",
        "toolReferenceName": "stSemanticTokensDelta",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-color)",
        "userDescription": "Get semantic token deltas for a file.",
        "modelDescription": "Returns semantic token delta data for a Structured Text file using a previous result id.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "previousResultId": {
              "type": "string",
              "description": "Previous semantic tokens result id"
            }
          },
          "required": [
            "filePath",
            "previousResultId"
          ]
        }
      },
      {
        "name": "trust_get_semantic_tokens_range",
        "displayName": "ST Semantic Tokens (Range)",
        "toolReferenceName": "stSemanticTokensRange",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-color)",
        "userDescription": "Get semantic tokens for a range.",
        "modelDescription": "Returns semantic token data for a specific range in a Structured Text file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "startLine": {
              "type": "number",
              "description": "Zero-based start line"
            },
            "startCharacter": {
              "type": "number",
              "description": "Zero-based start character"
            },
            "endLine": {
              "type": "number",
              "description": "Zero-based end line"
            },
            "endCharacter": {
              "type": "number",
              "description": "Zero-based end character"
            }
          },
          "required": [
            "filePath",
            "startLine",
            "startCharacter",
            "endLine",
            "endCharacter"
          ]
        }
      },
      {
        "name": "trust_get_inlay_hints",
        "displayName": "ST Inlay Hints",
        "toolReferenceName": "stInlayHints",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-parameter)",
        "userDescription": "Get inlay hints for a range.",
        "modelDescription": "Returns inlay hints for a specific range in a Structured Text file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "startLine": {
              "type": "number",
              "description": "Zero-based start line"
            },
            "startCharacter": {
              "type": "number",
              "description": "Zero-based start character"
            },
            "endLine": {
              "type": "number",
              "description": "Zero-based end line"
            },
            "endCharacter": {
              "type": "number",
              "description": "Zero-based end character"
            }
          },
          "required": [
            "filePath",
            "startLine",
            "startCharacter",
            "endLine",
            "endCharacter"
          ]
        }
      },
      {
        "name": "trust_get_linked_editing",
        "displayName": "ST Linked Editing",
        "toolReferenceName": "stLinkedEditing",
        "canBeReferencedInPrompt": true,
        "icon": "$(link)",
        "userDescription": "Get linked editing ranges at a position.",
        "modelDescription": "Returns linked editing ranges for a symbol at a specific position.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_get_document_links",
        "displayName": "ST Document Links",
        "toolReferenceName": "stDocumentLinks",
        "canBeReferencedInPrompt": true,
        "icon": "$(link)",
        "userDescription": "Get document links for a file.",
        "modelDescription": "Returns document links for a Structured Text file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "resolve": {
              "type": "boolean",
              "description": "Whether to resolve link targets"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_get_code_lens",
        "displayName": "ST Code Lens",
        "toolReferenceName": "stCodeLens",
        "canBeReferencedInPrompt": true,
        "icon": "$(eye)",
        "userDescription": "Get code lenses for a file.",
        "modelDescription": "Returns code lenses for a Structured Text file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "resolve": {
              "type": "boolean",
              "description": "Whether to resolve code lens commands"
            }
          },
          "required": [
            "filePath"
          ]
        }
      },
      {
        "name": "trust_get_selection_ranges",
        "displayName": "ST Selection Ranges",
        "toolReferenceName": "stSelectionRanges",
        "canBeReferencedInPrompt": true,
        "icon": "$(selection)",
        "userDescription": "Get selection ranges for positions.",
        "modelDescription": "Returns selection ranges for one or more positions in a Structured Text file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "positions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "line": {
                    "type": "number",
                    "description": "Zero-based line number"
                  },
                  "character": {
                    "type": "number",
                    "description": "Zero-based character position"
                  }
                },
                "required": [
                  "line",
                  "character"
                ]
              }
            }
          },
          "required": [
            "filePath",
            "positions"
          ]
        }
      },
      {
        "name": "trust_get_on_type_formatting_edits",
        "displayName": "ST On-Type Formatting",
        "toolReferenceName": "stOnTypeFormattingEdits",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-operator)",
        "userDescription": "Get formatting edits for a typed character.",
        "modelDescription": "Returns formatting edits triggered by a specific character at a position.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            },
            "triggerCharacter": {
              "type": "string",
              "description": "Trigger character, e.g. ';'"
            }
          },
          "required": [
            "filePath",
            "line",
            "character",
            "triggerCharacter"
          ]
        }
      },
      {
        "name": "trust_call_hierarchy_prepare",
        "displayName": "ST Call Hierarchy Prepare",
        "toolReferenceName": "stCallHierarchyPrepare",
        "canBeReferencedInPrompt": true,
        "icon": "$(call-hierarchy)",
        "userDescription": "Prepare a call hierarchy item at a position.",
        "modelDescription": "Returns call hierarchy items for a symbol at a position.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_call_hierarchy_incoming",
        "displayName": "ST Call Hierarchy Incoming",
        "toolReferenceName": "stCallHierarchyIncoming",
        "canBeReferencedInPrompt": true,
        "icon": "$(call-hierarchy)",
        "userDescription": "Get incoming calls for a call hierarchy item.",
        "modelDescription": "Returns incoming call hierarchy items for a prepared call hierarchy item.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "item": {
              "type": "object",
              "description": "CallHierarchyItem to query"
            }
          },
          "required": [
            "item"
          ]
        }
      },
      {
        "name": "trust_call_hierarchy_outgoing",
        "displayName": "ST Call Hierarchy Outgoing",
        "toolReferenceName": "stCallHierarchyOutgoing",
        "canBeReferencedInPrompt": true,
        "icon": "$(call-hierarchy)",
        "userDescription": "Get outgoing calls for a call hierarchy item.",
        "modelDescription": "Returns outgoing call hierarchy items for a prepared call hierarchy item.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "item": {
              "type": "object",
              "description": "CallHierarchyItem to query"
            }
          },
          "required": [
            "item"
          ]
        }
      },
      {
        "name": "trust_type_hierarchy_prepare",
        "displayName": "ST Type Hierarchy Prepare",
        "toolReferenceName": "stTypeHierarchyPrepare",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-class)",
        "userDescription": "Prepare a type hierarchy item at a position.",
        "modelDescription": "Returns type hierarchy items for a symbol at a position.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Absolute path to the .st file"
            },
            "line": {
              "type": "number",
              "description": "Zero-based line number"
            },
            "character": {
              "type": "number",
              "description": "Zero-based character position"
            }
          },
          "required": [
            "filePath",
            "line",
            "character"
          ]
        }
      },
      {
        "name": "trust_type_hierarchy_supertypes",
        "displayName": "ST Type Hierarchy Supertypes",
        "toolReferenceName": "stTypeHierarchySupertypes",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-class)",
        "userDescription": "Get supertypes for a type hierarchy item.",
        "modelDescription": "Returns supertypes for a prepared type hierarchy item.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "item": {
              "type": "object",
              "description": "TypeHierarchyItem to query"
            }
          },
          "required": [
            "item"
          ]
        }
      },
      {
        "name": "trust_type_hierarchy_subtypes",
        "displayName": "ST Type Hierarchy Subtypes",
        "toolReferenceName": "stTypeHierarchySubtypes",
        "canBeReferencedInPrompt": true,
        "icon": "$(symbol-class)",
        "userDescription": "Get subtypes for a type hierarchy item.",
        "modelDescription": "Returns subtypes for a prepared type hierarchy item.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "item": {
              "type": "object",
              "description": "TypeHierarchyItem to query"
            }
          },
          "required": [
            "item"
          ]
        }
      },
      {
        "name": "trust_get_workspace_symbols_timed",
        "displayName": "ST Workspace Symbols (Timed)",
        "toolReferenceName": "stWorkspaceSymbolsTimed",
        "canBeReferencedInPrompt": true,
        "icon": "$(search)",
        "userDescription": "Search workspace symbols with timing information.",
        "modelDescription": "Searches workspace symbols and returns timing metadata for the query.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "Search query for symbol names"
            },
            "limit": {
              "type": "number",
              "description": "Maximum number of results to return"
            },
            "pathIncludes": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optional path filters to apply"
            }
          },
          "required": [
            "query"
          ]
        }
      },
      {
        "name": "trust_workspace_rename_file",
        "displayName": "ST Workspace Rename File",
        "toolReferenceName": "stWorkspaceRenameFile",
        "canBeReferencedInPrompt": true,
        "icon": "$(file)",
        "userDescription": "Rename or move a file in the workspace.",
        "modelDescription": "Renames or moves a file in the workspace and optionally uses a workspace edit.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "oldPath": {
              "type": "string",
              "description": "Absolute path to the existing file"
            },
            "newPath": {
              "type": "string",
              "description": "Absolute path to the new file"
            },
            "overwrite": {
              "type": "boolean",
              "description": "Whether to overwrite an existing file at the destination"
            },
            "useWorkspaceEdit": {
              "type": "boolean",
              "description": "Whether to use a workspace edit for the rename"
            }
          },
          "required": [
            "oldPath",
            "newPath"
          ]
        }
      },
      {
        "name": "trust_update_settings",
        "displayName": "ST Update Settings",
        "toolReferenceName": "stUpdateSettings",
        "canBeReferencedInPrompt": true,
        "icon": "$(settings-gear)",
        "userDescription": "Update a VS Code setting for Structured Text.",
        "modelDescription": "Updates a VS Code setting value and waits for diagnostics refresh.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "key": {
              "type": "string",
              "description": "Configuration key, e.g. trust-lsp.trace.server"
            },
            "value": {
              "type": [
                "string",
                "number",
                "boolean",
                "null"
              ],
              "description": "New value for the setting"
            },
            "scope": {
              "type": "string",
              "enum": [
                "workspace",
                "global",
                "workspaceFolder"
              ],
              "description": "Optional settings scope"
            },
            "filePath": {
              "type": "string",
              "description": "Optional file path/URI to wait for diagnostics refresh; required for workspaceFolder scope"
            },
            "timeoutMs": {
              "type": "number",
              "description": "Optional timeout in milliseconds"
            },
            "forceRefresh": {
              "type": "boolean",
              "description": "Force a pull-diagnostics request after updating the setting"
            }
          },
          "required": [
            "key",
            "value"
          ]
        }
      },
      {
        "name": "trust_read_telemetry",
        "displayName": "ST Read Telemetry",
        "toolReferenceName": "stReadTelemetry",
        "canBeReferencedInPrompt": true,
        "icon": "$(graph)",
        "userDescription": "Read trust-lsp telemetry or log output.",
        "modelDescription": "Reads trust-lsp telemetry/log data from the workspace or a specified file.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Optional absolute path to the telemetry or log file"
            },
            "limit": {
              "type": "number",
              "description": "Maximum number of entries to return"
            },
            "tail": {
              "type": "boolean",
              "description": "Whether to return the last N entries"
            }
          }
        }
      },
      {
        "name": "trust_debug_start",
        "displayName": "ST Debug Start",
        "toolReferenceName": "stDebugStart",
        "canBeReferencedInPrompt": true,
        "icon": "$(debug-start)",
        "userDescription": "Start a Structured Text debug session.",
        "modelDescription": "Starts the Structured Text debugger. Optionally provide a configuration file path (must contain a CONFIGURATION entry).",
        "inputSchema": {
          "type": "object",
          "properties": {
            "filePath": {
              "type": "string",
              "description": "Optional absolute path to the CONFIGURATION entry file"
            }
          }
        }
      },
      {
        "name": "trust_debug_attach",
        "displayName": "ST Debug Attach",
        "toolReferenceName": "stDebugAttach",
        "canBeReferencedInPrompt": true,
        "icon": "$(debug-alt)",
        "userDescription": "Attach the debugger to a running runtime.",
        "modelDescription": "Attaches the Structured Text debugger using runtime.toml (runtime.control.endpoint).",
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "trust_debug_reload",
        "displayName": "ST Debug Reload",
        "toolReferenceName": "stDebugReload",
        "canBeReferencedInPrompt": true,
        "icon": "$(refresh)",
        "userDescription": "Hot reload an active Structured Text debug session.",
        "modelDescription": "Requests a hot reload for the active Structured Text debug session.",
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "trust_debug_open_io_panel",
        "displayName": "ST Debug Open I/O Panel",
        "toolReferenceName": "stDebugOpenIoPanel",
        "canBeReferencedInPrompt": true,
        "icon": "$(split-horizontal)",
        "userDescription": "Open the Structured Text runtime I/O panel.",
        "modelDescription": "Opens the Structured Text runtime I/O panel for the active debug session.",
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "trust_debug_ensure_configuration",
        "displayName": "ST Debug Ensure Configuration",
        "toolReferenceName": "stDebugEnsureConfiguration",
        "canBeReferencedInPrompt": true,
        "icon": "$(new-file)",
        "userDescription": "Create or select a Structured Text debug configuration entry file.",
        "modelDescription": "Ensures a CONFIGURATION entry file exists and can be selected for debugging.",
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      }
    ],
    "commands": [
      {
        "command": "trust-lsp.newProject",
        "title": "Structured Text: New Project",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.plcopen.import",
        "title": "Structured Text: Import PLCopen XML",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.plcopen.export",
        "title": "Structured Text: Export PLCopen XML",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.moveNamespace.ui",
        "title": "Structured Text: Move Namespace",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.debug.start",
        "title": "Structured Text: Start Debugging",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.debug.attach",
        "title": "Structured Text: Attach Debugger",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.debug.ensureConfiguration",
        "title": "Structured Text: Create/Select Configuration",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.debug.openIoPanel",
        "title": "Structured Text: Open Runtime Panel",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.hmi.openPreview",
        "title": "Structured Text: Open HMI Preview",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.hmi.refreshFromDescriptor",
        "title": "Structured Text: Refresh HMI Descriptor",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.hmi.init",
        "title": "Structured Text: Initialize HMI Descriptor",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.debug.reload",
        "title": "Structured Text: Hot Reload",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.test.runAll",
        "title": "Structured Text: Run All Tests",
        "category": "Structured Text"
      },
      {
        "command": "trust-lsp.test.runOne",
        "title": "Structured Text: Run Test",
        "category": "Structured Text"
      }
    ],
    "menus": {
      "editor/context": [
        {
          "command": "trust-lsp.moveNamespace.ui",
          "when": "editorLangId == structured-text && trust-lsp.namespaceContext",
          "group": "refactor"
        }
      ]
    },
    "debuggers": [
      {
        "type": "structured-text",
        "label": "Structured Text",
        "languages": [
          "structured-text"
        ],
        "configurationAttributes": {
          "launch": {
            "required": [
              "program"
            ],
            "properties": {
              "program": {
                "type": "string",
                "description": "Path to the ST source or configuration file to debug"
              },
              "cwd": {
                "type": "string",
                "description": "Working directory for the debuggee"
              },
              "stopOnEntry": {
                "type": "boolean",
                "default": false,
                "description": "Pause immediately after launch"
              },
              "args": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "default": [],
                "description": "Arguments passed to the debuggee"
              },
              "env": {
                "type": "object",
                "default": {},
                "additionalProperties": {
                  "type": "string"
                },
                "description": "Environment variables for the debuggee"
              },
              "runtimeIncludeGlobs": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Glob patterns for Structured Text sources to load in the runtime."
              },
              "runtimeExcludeGlobs": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Glob patterns for Structured Text sources to exclude from the runtime load set."
              },
              "runtimeIgnorePragmas": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Top-of-file pragma tokens that exclude a file from runtime loading."
              },
              "runtimeRoot": {
                "type": "string",
                "description": "Base folder for runtime include/exclude globs (defaults to workspace folder or entry file directory)."
              }
            }
          },
          "attach": {
            "required": [
              "endpoint"
            ],
            "properties": {
              "endpoint": {
                "type": "string",
                "description": "Runtime control endpoint (tcp://host:port or unix://path)"
              },
              "authToken": {
                "type": "string",
                "description": "Optional control auth token"
              },
              "cwd": {
                "type": "string",
                "description": "Working directory for the debuggee"
              },
              "runtimeIncludeGlobs": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Glob patterns for Structured Text sources to load in the runtime."
              },
              "runtimeExcludeGlobs": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Glob patterns for Structured Text sources to exclude from the runtime load set."
              },
              "runtimeIgnorePragmas": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Top-of-file pragma tokens that exclude a file from runtime loading."
              },
              "runtimeRoot": {
                "type": "string",
                "description": "Base folder for runtime include/exclude globs (defaults to workspace folder or entry file directory)."
              }
            }
          }
        },
        "initialConfigurations": [
          {
            "type": "structured-text",
            "request": "launch",
            "name": "Debug Structured Text",
            "program": "${file}"
          }
        ]
      }
    ],
    "snippets": [
      {
        "language": "structured-text",
        "path": "./snippets/st.code-snippets"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "build:panel": "node ./scripts/build-io-panel.js",
    "compile": "npm run build:panel && tsc -p ./",
    "watch": "node ./scripts/watch-io-panel.js",
    "lint": "eslint src --ext ts",
    "test": "npm run compile && node ./out/test/runTest.js"
  },
  "dependencies": {
    "@vscode/codicons": "^0.0.44",
    "vscode-languageclient": "^9.0.1"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.0",
    "@types/vscode": "^1.108.1",
    "@types/node": "^18.0.0",
    "typescript": "^5.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@vscode/test-electron": "^2.4.1",
    "eslint": "^8.0.0",
    "mocha": "^10.0.0"
  }
}
